# ユーザーについて

- アカウント
  - `${ユーザー名}@接続元ホスト` で一意に識別される
  - 認証認可の基本単位はユーザー名ではなくアカウント
- ユーザー名
  - アカウントの前半部分
- 接続元ホスト
  - アカウントの後半部分
  - `CREATE USER` 時に指定しない場合は `%`（任意のホスト）になる
  - IP アドレス以外 (DNS によるレコード指定) も指定可能
    - ただし、DNS レコードを指定する場合は `skip_name_resolve` オプションが OFF になっている必要がある
      - `skip_name_resolve` はデフォルトで OFF になっているが、以下の理由から ON にしていることが多い
        - 接続要求が行われた時、MySQL は接続元の IP アドレスを逆引きにかける (IP アドレスからホスト名を調べる)
        - 逆引きに成功した場合は、IP アドレス + ホスト名、失敗した場合は IP アドレスを使用して「接続元ホスト」に合致するかを検索する
        - `skip_name_resolve` を ON にすると、逆引きをスキップして IP アドレスのみで「接続元ホスト」の合致を確認するようになる
        - 逆に OFF だと接続要求の都度逆引きが発生するため接続ごとのオーバーヘッドが大きくなる
          - 逆引き用の DNS サーバーがダウンした場合、すべての接続要求が DNS タイムアウトを待ってから IP アドレスのみで評価されることになる
        - そのため、パフォーマンスや可用性の観点から `skip_name_resolve` を ON にし、接続元ホストは IP アドレス (またはネットワークアドレス) 形式で指定するのが定石
